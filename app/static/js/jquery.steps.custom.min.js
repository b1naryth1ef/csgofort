(function(e,w){function N(a,b,d){var c=a.children(b.headerTag),f=a.children(b.bodyTag);c.length>f.length?k("One or more corresponding step {0} are missing.","contents"):c.length<f.length&&k("One or more corresponding step {0} are missing.","titles");var g=b.startIndex;d.stepCount=c.length;b.saveState&&e.cookie&&(b=e.cookie("jQu3ry_5teps_St@te_"+m(a)),b=parseInt(b,0),!isNaN(b)&&b<d.stepCount&&(g=b));d.currentIndex=g;c.each(function(b){var d=e(this);b=f.eq(b);var c=b.data("mode"),c=null==c?l.html:u(l,
/^\s*$/.test(c)||isNaN(c)?c:parseInt(c,0)),g=c===l.html||b.data("url")===w?"":b.data("url"),h=c!==l.html&&"1"===b.data("loaded"),d=e.extend({},F,{title:d.html(),content:c===l.html?b.html():"",contentUrl:g,contentMode:c,contentLoaded:h});a.data("steps").push(d)})}function G(a,b){var d=a.find(".steps li").eq(b.currentIndex);a.triggerHandler("finishing",[b.currentIndex])?(d.addClass("done").removeClass("error"),a.triggerHandler("finished",[b.currentIndex])):d.addClass("error")}function x(a){var b=a.data("eventNamespace");
null==b&&(b="."+m(a),a.data("eventNamespace",b));return b}function s(a,b){var d=m(a);return a.find("#"+d+"-t-"+b)}function y(a,b){var d=m(a);return a.find("#"+d+"-p-"+b)}function n(a){return a.data("options")}function h(a){return a.data("state")}function z(a,b){var d=a.data("steps");(0>b||b>=d.length)&&k("Index out of range.");return d[b]}function m(a){var b=a.data("uid");null==b&&(b=a._id(),null==b&&(b="steps-uid-".concat(A),a._id(b)),A++,a.data("uid",b));return b}function u(a,b){H("enumType",a);
H("keyOrValue",b);if("string"===typeof b){var d=a[b];d===w&&k("The enum key '{0}' does not exist.",b);return d}if("number"===typeof b){for(d in a)if(a[d]===b)return b;k("Invalid enum value '{0}'.",b)}else k("Invalid key or value type.")}function O(a){var b=e.extend(!0,{},P,a);return this.each(function(){var a=e(this),c={currentIndex:b.startIndex,currentStep:null,stepCount:0,transitionElement:null};a.data("options",b);a.data("state",c);a.data("steps",[]);N(a,b,c);Q(a,b,c);c=x(a);a.bind("canceled"+
c,b.onCanceled);a.bind("finishing"+c,b.onFinishing);a.bind("finished"+c,b.onFinished);a.bind("stepChanging"+c,b.onStepChanging);a.bind("stepChanged"+c,b.onStepChanged);b.enableKeyNavigation&&a.bind("keyup"+c,R);a.find(".actions a").bind("click"+c,S);b.autoFocus&&0===A&&s(a,b.startIndex).focus()})}function I(a,b,d,c,f){(0>c||c>d.stepCount)&&k("Index out of range.");var g=f=e.extend({},F,f);a.data("steps").splice(c,0,g);d.currentIndex!==d.stepCount&&d.currentIndex>=c&&(d.currentIndex++,B(a,b,d));d.stepCount++;
var g=a.find(".content"),q=e("<{0}>{1}</{0}>".format(b.headerTag,f.title)),h=e("<{0}></{0}>".format(b.bodyTag));null!=f.contentMode&&f.contentMode!==l.html||h.html(f.content);0===c?g.prepend(h).prepend(q):y(a,c-1).after(h).after(q);J(a,d,h,c);K(a,b,d,q,c);L(a,b,d,c);c===d.currentIndex&&C(a,b,d);v(a,b,d);return a}function R(a){var b=e(this),d=n(b),c=h(b);if(d.suppressPaginationOnFocus&&b.find(":focus").is(":input"))return a.preventDefault(),!1;37===a.keyCode?(a.preventDefault(),t(b,d,c,c.currentIndex-
1)):39===a.keyCode&&(a.preventDefault(),t(b,d,c,c.currentIndex+1))}function M(a,b,d){if(0<d.stepCount){var c=z(a,d.currentIndex);if(!b.enableContentCache||!c.contentLoaded)switch(u(l,c.contentMode)){case l.iframe:a.find(".content > .body").eq(d.currentIndex).empty().html('<iframe src="'+c.contentUrl+'" frameborder="0" scrolling="no" />').data("loaded","1");break;case l.async:var f=y(a,d.currentIndex)._aria("busy","true").empty().append(D(b.loadingTemplate,{text:b.labels.loading}));e.ajax({url:c.contentUrl,
cache:!1}).done(function(a){f.empty().html(a)._aria("busy","false").data("loaded","1")})}}}function t(a,b,d,c){var f=d.currentIndex;return 0<=c&&c<d.stepCount&&!(b.forceMoveForward&&c<d.currentIndex)?(a=s(a,c),b=a.parent(),c=b.hasClass("disabled"),b._enableAria(),a.click(),f===d.currentIndex&&c?(b._enableAria(!1),!1):!0):!1}function S(a){a.preventDefault();var b=e(this);a=b.parent().parent().parent().parent();var d=n(a),c=h(a),b=b.attr("href");switch(b.substring(b.lastIndexOf("#")+1)){case "cancel":a.triggerHandler("canceled");
break;case "finish":G(a,c);break;case "next":t(a,d,c,c.currentIndex+1);break;case "previous":t(a,d,c,c.currentIndex-1)}}function v(a,b,d){if(b.enablePagination){var c=a.find(".actions a[href$='#finish']").parent(),f=a.find(".actions a[href$='#next']").parent();b.forceMoveForward||a.find(".actions a[href$='#previous']").parent()._enableAria(0<d.currentIndex);b.enableFinishButton&&b.showFinishButtonAlways?(c._enableAria(0<d.stepCount),f._enableAria(1<d.stepCount&&d.stepCount>d.currentIndex+1)):(c._showAria(b.enableFinishButton&&
d.stepCount===d.currentIndex+1),f._showAria(0===d.stepCount||d.stepCount>d.currentIndex+1)._enableAria(d.stepCount>d.currentIndex+1||!b.enableFinishButton))}}function C(a,b,d,c){var f=s(a,d.currentIndex),g=e('<span class="current-info audible">'+b.labels.current+" </span>");b=a.find(".content > .title");null!=c&&(a=s(a,c),a.parent().addClass("done").removeClass("error")._selectAria(!1),b.eq(c).removeClass("current").next(".body").removeClass("current"),g=a.find(".current-info"),f.focus());f.prepend(g).parent()._selectAria().removeClass("done")._enableAria();
b.eq(d.currentIndex).addClass("current").next(".body").addClass("current")}function L(a,b,d,c){for(var f=m(a);c<d.stepCount;c++){var e=f+"-t-"+c,q=f+"-p-"+c,h=f+"-h-"+c,r=a.find(".title").eq(c)._id(h);a.find(".steps a").eq(c)._id(e)._aria("controls",q).attr("href","#"+h).html(D(b.titleTemplate,{index:c+1,title:r.html()}));a.find(".body").eq(c)._id(q)._aria("labelledby",h)}}function Q(a,b,d){var c=u(E,b.stepsOrientation)===E.vertical?" vertical":"",f=e('<{0} class="{1}">{2}</{0}>'.format(b.contentContainerTag,
"content "+b.clearFixCssClass,a.html())),g=e('<{0} class="{1}">{2}</{0}>'.format(b.stepsContainerTag,"steps "+b.clearFixCssClass,'<ul role="tablist"></ul>')),h=f.children(b.headerTag),k=f.children(b.bodyTag);a.attr("role","application").empty().append(g).append(f).addClass(b.cssClass+" "+b.clearFixCssClass+c);k.each(function(b){J(a,d,e(this),b)});h.each(function(c){K(a,b,d,e(this),c)});C(a,b,d);T(a,b,d)}function J(a,b,d,c){a=m(a);var f=a+"-h-"+c;d._id(a+"-p-"+c).attr("role","tabpanel")._aria("labelledby",
f).addClass("body")._showAria(b.currentIndex===c)}function T(a,b,d){if(b.enablePagination){var c="";b.forceMoveForward||(c+='<li class="pull-left"><a href="#{0}" class="btn btn-link" role="menuitem">{1}</a></li>'.format("previous",b.labels.previous));c+='<li class="pull-right"><a href="#{0}" class="btn btn-default" role="menuitem">{1}</a></li>'.format("next",b.labels.next);b.enableFinishButton&&(c+='<li class="pull-right"><a href="#{0}" class="btn btn-success" role="menuitem">{1}</a></li>'.format("finish",
b.labels.finish));b.enableCancelButton&&(c+='<li><a href="#{0}" role="menuitem">{1}</a></li>'.format("cancel",b.labels.cancel));a.append('<{0} class="actions {1}"><ul role="menu" aria-label="{2}">{3}</ul></{0}>'.format(b.actionContainerTag,b.clearFixCssClass,b.labels.pagination,c));v(a,b,d);M(a,b,d)}}function D(a,b){for(var d=a.match(/#([a-z]*)#/gi),c=0;c<d.length;c++){var f=d[c],e=f.substring(1,f.length-1);b[e]===w&&k("The key '{0}' does not exist in the substitute collection!",e);a=a.replace(f,
b[e])}return a}function K(a,b,d,c,f){var g=m(a),h=g+"-t-"+f,k=g+"-p-"+f,g=g+"-h-"+f,r=a.find(".steps > ul"),l=D(b.titleTemplate,{index:f+1,title:c.html()}),h=e('<li role="tab"><a id="'+h+'" href="#'+g+'" aria-controls="'+k+'">'+l+"</a></li>");h._enableAria(b.enableAllSteps||d.currentIndex>f);d.currentIndex>f&&h.addClass("done");c._id(g).attr("tabindex","-1").addClass("title");0===f?r.prepend(h):r.find("li").eq(f-1).after(h);0===f&&r.find("li").removeClass("first").eq(f).addClass("first");f===d.stepCount-
1&&r.find("li").removeClass("last").eq(f).addClass("last");h.children("a").bind("click"+x(a),U)}function B(a,b,d){b.saveState&&e.cookie&&e.cookie("jQu3ry_5teps_St@te_"+m(a),d.currentIndex)}function V(a,b,d,c,f){var g=a.find(".content > .body");a=u(p,b.transitionEffect);var k=b.transitionEffectSpeed;b=g.eq(c);g=g.eq(f);switch(a){case p.fade:case p.slide:c=a===p.fade?"fadeOut":"slideUp";var l=a===p.fade?"fadeIn":"slideDown";d.transitionElement=b;g[c](k,function(){var a=e(this)._showAria(!1).parent().parent(),
a=h(a);a.transitionElement&&(a.transitionElement[l](k,function(){e(this)._showAria()}),a.transitionElement=null)}).promise();break;case p.slideLeft:d=g.outerWidth(!0);a=c>f?d:-d;g.animate({left:c>f?-d:d},k,function(){e(this)._showAria(!1)}).promise();b.css("left",a+"px")._showAria().animate({left:0},k).promise();break;default:g._showAria(!1),b._showAria()}}function U(a){a.preventDefault();var b=e(this);a=b.parent().parent().parent().parent();var d=n(a),c=h(a),f=c.currentIndex;if(b.parent().is(":not(.disabled):not(.current)")&&
(b=b.attr("href"),b=parseInt(b.substring(b.lastIndexOf("-")+1),0),(0>b||b>=c.stepCount)&&k("Index out of range."),!(d.forceMoveForward&&b<c.currentIndex))){var g=c.currentIndex;a.triggerHandler("stepChanging",[c.currentIndex,b])?(c.currentIndex=b,B(a,d,c),C(a,d,c,g),v(a,d,c),M(a,d,c),V(a,d,c,b,g),a.triggerHandler("stepChanged",[b,g])):a.find(".steps li").eq(g).addClass("error")}if(f===c.currentIndex)return s(a,f).focus(),!1}function k(a){1<arguments.length&&(a=a.format(Array.prototype.slice.call(arguments,
1)));throw Error(a);}function H(a,b){null==b&&k("The argument '{0}' is null or undefined.",a)}e.fn.extend({_aria:function(a,b){return this.attr("aria-"+a,b)},_removeAria:function(a){return this.removeAttr("aria-"+a)},_enableAria:function(a){return null==a||a?this.removeClass("disabled")._aria("disabled","false"):this.addClass("disabled")._aria("disabled","true")},_showAria:function(a){return null==a||a?this.show()._aria("hidden","false"):this.hide()._aria("hidden","true")},_selectAria:function(a){return null==
a||a?this.addClass("current")._aria("selected","true"):this.removeClass("current")._aria("selected","false")},_id:function(a){return a?this.attr("id",a):this.attr("id")}});String.prototype.format||(String.prototype.format=function(){for(var a=1===arguments.length&&e.isArray(arguments[0])?arguments[0]:arguments,b=this,d=0;d<a.length;d++)b=b.replace(new RegExp("\\{"+d+"\\}","gm"),a[d]);return b});var A=0;e.fn.steps=function(a){if(e.fn.steps[a])return e.fn.steps[a].apply(this,Array.prototype.slice.call(arguments,
1));if("object"!==typeof a&&a)e.error("Method "+a+" does not exist on jQuery.steps");else return O.apply(this,arguments)};e.fn.steps.add=function(a){var b=h(this);return I(this,n(this),b,b.stepCount,a)};e.fn.steps.destroy=function(){var a=n(this),b=x(this);this.unbind(b).removeData("uid").removeData("options").removeData("state").removeData("steps").removeData("eventNamespace").find(".actions a").unbind(b);this.removeClass(a.clearFixCssClass+" vertical");a=this.find(".content > *");a.removeData("loaded").removeData("mode").removeData("url");
a.removeAttr("id").removeAttr("role").removeAttr("tabindex").removeAttr("class").removeAttr("style")._removeAria("labelledby")._removeAria("hidden");this.find(".content > [data-mode='async'],.content > [data-mode='iframe']").empty();a=e('<{0} class="{1}"></{0}>'.format(this.get(0).tagName,this.attr("class")));b=this._id();null!=b&&""!==b&&a._id(b);a.html(this.find(".content").html());this.after(a);this.remove();return a};e.fn.steps.finish=function(){G(this,h(this))};e.fn.steps.getCurrentIndex=function(){return h(this).currentIndex};
e.fn.steps.getCurrentStep=function(){return z(this,h(this).currentIndex)};e.fn.steps.getStep=function(a){return z(this,a)};e.fn.steps.insert=function(a,b){return I(this,n(this),h(this),a,b)};e.fn.steps.next=function(){var a=n(this),b=h(this);return t(this,a,b,b.currentIndex+1)};e.fn.steps.previous=function(){var a=n(this),b=h(this);return t(this,a,b,b.currentIndex-1)};e.fn.steps.remove=function(a){var b=n(this),d=h(this);if(0>a||a>=d.stepCount||d.currentIndex===a)a=!1;else{this.data("steps").splice(a,
1);d.currentIndex>a&&(d.currentIndex--,B(this,b,d));d.stepCount--;var c=m(this);this.find("#"+c+"-h-"+a).remove();y(this,a).remove();s(this,a).parent().remove();0===a&&this.find(".steps li").first().addClass("first");a===d.stepCount&&this.find(".steps li").eq(a).addClass("last");L(this,b,d,a);v(this,b,d);a=!0}return a};e.fn.steps.setStep=function(a,b){throw Error("Not yet implemented!");};e.fn.steps.skip=function(a){throw Error("Not yet implemented!");};var l=e.fn.steps.contentMode={html:0,iframe:1,
async:2},E=e.fn.steps.stepsOrientation={horizontal:0,vertical:1},p=e.fn.steps.transitionEffect={none:0,fade:1,slide:2,slideLeft:3},F=e.fn.steps.stepModel={title:"",content:"",contentUrl:"",contentMode:l.html,contentLoaded:!1},P=e.fn.steps.defaults={headerTag:"h1",bodyTag:"div",contentContainerTag:"div",actionContainerTag:"div",stepsContainerTag:"div",cssClass:"wizard",clearFixCssClass:"clearfix",stepsOrientation:E.horizontal,titleTemplate:'<span class="number">#index#.</span> #title#',loadingTemplate:'<span class="spinner"></span> #text#',
autoFocus:!1,enableAllSteps:!1,enableKeyNavigation:!0,enablePagination:!0,suppressPaginationOnFocus:!0,enableContentCache:!0,enableCancelButton:!1,enableFinishButton:!0,preloadContent:!1,showFinishButtonAlways:!1,forceMoveForward:!1,saveState:!1,startIndex:0,transitionEffect:p.none,transitionEffectSpeed:200,onStepChanging:function(a,b,d){return!0},onStepChanged:function(a,b,d){},onCanceled:function(a){},onFinishing:function(a,b){return!0},onFinished:function(a,b){},labels:{cancel:"Cancel",current:"current step:",
pagination:"Pagination",finish:"Finish",next:"Next",previous:"Previous",loading:"Loading ..."}}})(jQuery);
